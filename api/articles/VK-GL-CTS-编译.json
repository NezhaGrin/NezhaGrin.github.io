{"title":"VK-GL-CTS 编译","uid":"aa00e35aacd87969b6ac07d7e9f82352","slug":"VK-GL-CTS-编译","date":"2024-03-04T09:15:07.000Z","updated":"2024-03-04T09:35:24.808Z","comments":true,"path":"api/articles/VK-GL-CTS-编译.json","keywords":null,"cover":null,"content":"<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>💡 Tips：VK-GL-CTS 是一个由 Khronos Group 维护的开源项目，旨在测试 OpenGL 和 Vulkan 实现的符合性。它的主要目的是确保不同平台上的 OpenGL 和 Vulkan 实现都符合 Khronos Group 发布的规范，以此来保证应用程序在各种环境下的可移植性和稳定性。</p></blockquote>\n<h3 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h3><p>更改 external&#x2F;fetch_sources.py 文件当中的 PACKAGES（302 行），把 ZLIB 的下载地址改为：<a href=\"https://zlib.net/fossils/zlib-1.2.11.tar.gz%E3%80%82\">https://zlib.net/fossils/zlib-1.2.11.tar.gz。</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python external/fetch_sources.py</span><br></pre></td></tr></table></figure>\n\n<p>如果提示 checksum 不正确，那么需要重新的计算一下 checksum，正常情况下无需更改 checksum：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://zlib.net/fossils/zlib-1.2.11.tar.gz &amp;&amp; <span class=\"built_in\">sha256sum</span> zlib-1.2.11.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"开始编译\"><a href=\"#开始编译\" class=\"headerlink\" title=\"开始编译\"></a>开始编译</h3><p>在开始编译下查看一下系统支持的 OpenGL 版本：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install mesa-utils</span><br><span class=\"line\">glxinfo | grep <span class=\"string\">&quot;OpenGL ES&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>安装必备的一些包：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install -y build-essential python python3 cmake libgl1-mesa-dev libx11-dev wget</span><br></pre></td></tr></table></figure>\n\n<p>Vulkan 的编译比较简单，在 cmake 目录按照 cmake 常规选项进行 cmake 后 make 即可。OpenGL 的编译需要指定依赖平台和 API 类型版本。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> build</span><br><span class=\"line\"><span class=\"built_in\">cd</span> build</span><br><span class=\"line\">cmake ../ -DDEQP_TARGET=x11_egl_glx -DGLCTS_GTF_TARGET=gl/gles2/gles3/gles31/gles32</span><br><span class=\"line\">cmake --build .</span><br></pre></td></tr></table></figure>\n\n<p>编译出来的目录结构：</p>\n<ul>\n<li>execserver 目录下的 execserver 需要拷贝到被测试主机上；</li>\n<li>external&#x2F;openglcts&#x2F;modules 目录下的 glcts 也需拷贝到被测试主机上；</li>\n</ul>\n<h3 id=\"开始测试\"><a href=\"#开始测试\" class=\"headerlink\" title=\"开始测试\"></a>开始测试</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./executor --connect=192.168.2.71 --port=50016 --workdir=/home/daixianjin/projectTest --binaryname=glcts --caselistdir=XML --testset=dEQP-GLES2.*</span><br></pre></td></tr></table></figure>\n\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">TIP</p>\n<p>注意：caselistdir 需要跟 executor 在一台机器上的，后的 dEQP-GLES2 需要根据支持的 opengl 来选择。</p>\n\n</div>\n<h3 id=\"自动启动\"><a href=\"#自动启动\" class=\"headerlink\" title=\"自动启动\"></a>自动启动</h3><p>创建一个新的 systemd 服务单元文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo vim /etc/systemd/system/CTS-execserver.service</span><br></pre></td></tr></table></figure>\n\n<p>将以下内容复制到该文件中，然后保存并退出：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[<span class=\"string\">Unit</span>]</span><br><span class=\"line\"><span class=\"string\">Description=CTS-execserver</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">Service</span>]</span><br><span class=\"line\"><span class=\"string\">ExecStart=/home/daixianjin/projectTest/execserver</span></span><br><span class=\"line\"><span class=\"string\">Environment=DISPLAY=:0</span></span><br><span class=\"line\"></span><br><span class=\"line\">[<span class=\"string\">Install</span>]</span><br><span class=\"line\"><span class=\"string\">WantedBy=multi-user.target</span></span><br></pre></td></tr></table></figure>\n\n<p>使用以下命令启用和启动该服务：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl <span class=\"built_in\">enable</span> CTS-execserver</span><br><span class=\"line\">sudo systemctl start CTS-execserver</span><br></pre></td></tr></table></figure>\n\n<p>确认服务已经成功启动：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo systemctl status CTS-execserver</span><br></pre></td></tr></table></figure>\n\n<p>配置 xhost 给与程序执行图形化的权限：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim ~/.xprofile</span><br></pre></td></tr></table></figure>\n\n<p>添加内容：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\">xhost +</span><br></pre></td></tr></table></figure>\n\n<p>添加权限：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">chmod</span> +x ~/.xprofile</span><br></pre></td></tr></table></figure>","feature":true,"text":"VK-GL-CTS 是一个由 Khronos Group 维护的开源项目，旨在测试 OpenGL 和 Vulkan 实现的符合性。它的主要目的是确保不同平台上的 OpenGL 和 Vulkan 实现都符合 Khronos Group 发布的规范，以此来保证应用程序在各种环境下的可移植性和稳定性。...","permalink":"/post/VK-GL-CTS-编译","photos":[],"count_time":{"symbolsCount":"1.7k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"CTS","slug":"CTS","count":1,"path":"api/tags/CTS.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96\"><span class=\"toc-text\">安装依赖</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BC%80%E5%A7%8B%E7%BC%96%E8%AF%91\"><span class=\"toc-text\">开始编译</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BC%80%E5%A7%8B%E6%B5%8B%E8%AF%95\"><span class=\"toc-text\">开始测试</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8\"><span class=\"toc-text\">自动启动</span></a></li></ol>","author":{"name":"哪吒","slug":"blog-author","avatar":"https://pic.imgdb.cn/item/65ba193b871b83018a65323c.jpg","link":"/","description":"人心中的成见就像一座大山，任你怎么努力也休想搬动。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"openEuler Embedded 交叉编译","uid":"51abce8d287243a8415fa6cdbda1af32","slug":"openEuler-Embedded-交叉编译","date":"2024-03-04T08:20:19.000Z","updated":"2024-03-04T09:06:51.991Z","comments":true,"path":"api/articles/openEuler-Embedded-交叉编译.json","keywords":null,"cover":[],"text":"openEuler Embedded 是基于 openEuler 社区面向嵌入式场景的 Linux 版本，旨在成为一个高质量的以 Linux 为中心的嵌入式系统软件平台。...","permalink":"/post/openEuler-Embedded-交叉编译","photos":[],"count_time":{"symbolsCount":"3.7k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"openEuler Embedded","slug":"openEuler-Embedded","count":1,"path":"api/tags/openEuler-Embedded.json"}],"author":{"name":"哪吒","slug":"blog-author","avatar":"https://pic.imgdb.cn/item/65ba193b871b83018a65323c.jpg","link":"/","description":"人心中的成见就像一座大山，任你怎么努力也休想搬动。","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}